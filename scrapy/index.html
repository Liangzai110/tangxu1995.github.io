<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Scrapy | 2048</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Scrapy</h1><a id="logo" href="/.">2048</a><p class="description">Life is short, I use Python</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Scrapy</h1><div class="post-meta">May 10, 2018</div><a class="disqus-comment-count" href="/scrapy/#vcomment"><span class="valine-comment-count" data-xid="/scrapy/"></span><span> 条评论</span></a><div class="post-content"><hr>
<p><img src="https://hexo-pics.nos-eastchina1.126.net/scrapy/scrapy-logo.png" alt=""></p>
<hr>
<p>Scrapy 是一个为了爬取网站数据，提取结构性数据而编写的应用框架。可以应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。</p>
<p>其最初是为了<a href="http://en.wikipedia.org/wiki/Web_scraping" target="_blank" rel="noopener">网络抓取</a>所设计的，也可以应用在获取 API 所返回的数据或者通用的网络爬虫。</p>
<p>Scrapy 是使用 Python 语言(基于 Twisted 框架)编写的开源网络爬虫框架。其简单易用、灵活易扩展、开发社区活跃，并且是跨平台的(支持Linux, MacOS, Windows)。</p>
<p>安装方式：pip 安装<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip <span class="keyword">install</span> scrapy</span><br></pre></td></tr></table></figure></p>
<p>为了确认 Scrapy 被成功安装，可尝试在 python 命令行中将 scrapy 导入，如未报错，则安装成功。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; import scrapy</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; scrapy.version_info</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="scrapy-框架结构"><a href="#scrapy-框架结构" class="headerlink" title="scrapy 框架结构"></a>scrapy 框架结构</h1><p><img src="https://hexo-pics.nos-eastchina1.126.net/scrapy/scrapyfluent.jpg" alt=""></p>
<p><code>ENGINE</code> 引擎，框架的核心，用于协调其它组件间工作</p>
<p><code>SCHEDULER</code> 调度器，负责对 SPIDERS 提交的请求进行调度</p>
<p><code>DOWNLOADER</code> 下载器，负责下载页面</p>
<p><code>SPIDERS</code> 爬虫，负责提取页面中的数据，并产生对新页面的下载请求</p>
<p><code>MIDDLEWARES</code> 中间件，负责对 Request 对象和 Response 对象进行处理</p>
<p><code>ITEM PIPELINE</code> 数据管道，负责对爬取到的数据进行处理</p>
<h1 id="scrapy-工作流程"><a href="#scrapy-工作流程" class="headerlink" title="scrapy 工作流程"></a>scrapy 工作流程</h1><p>1、引擎 ENGINE 从调度器中取出一个链接 URL 用于接下来的抓取</p>
<p>2、引擎 ENGINE 把 URL 封装成一个请求 Request 传给下载器 Downloader</p>
<p>3、下载器 Downloader 把资源下载下来，并封装成 Response</p>
<p>4、爬虫解析 Response</p>
<p>5、若解析出实体 Item，交给数据管道 Item Pipeline 做进一步处理</p>
<p>6、若解析出链接 URL，就把 URL 交给调度器等待抓取</p>
<h1 id="scrapy-简单爬虫示例"><a href="#scrapy-简单爬虫示例" class="headerlink" title="scrapy 简单爬虫示例"></a>scrapy 简单爬虫示例</h1><p>专供爬虫初学者训练爬虫技术的网站 <a href="http://books.toscrape.com" target="_blank" rel="noopener">http://books.toscrape.com</a> ，从这里开始。</p>
<p><img src="https://hexo-pics.nos-eastchina1.126.net/scrapy/scrapydemo.jpg" alt=""></p>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>首先，来创建一个 scrapy 项目，在新建好的 scrapy_demo 文件夹下打开命令行工具，输入如下命令,在这里我创建好了名为 demo 的工程文件夹。<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>scrapy startproject projectName</span><br></pre></td></tr></table></figure></p>
<p><img src="https://hexo-pics.nos-eastchina1.126.net/scrapy/scrapynew.jpg" alt=""></p>
<p>接下来再切换到项目文件夹根目录下，使用命令创建爬虫文件。可以看到提示已经使用 basic 模板创建了一个名为 books 的爬虫文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> projectName</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> scrapy genspider spiderName[爬虫名称] url[爬虫网址]</span></span><br></pre></td></tr></table></figure>
<p><img src="https://hexo-pics.nos-eastchina1.126.net/scrapy/scrapy_book.jpg" alt=""></p>
<p>在此之后，使用 Pycharm 将整个 scrapy 项目导入。</p>
<p><img src="https://hexo-pics.nos-eastchina1.126.net/scrapy/scrapypycharm.jpg" alt=""></p>
<p><code>scrapy.cfg</code> 项目的配置信息，主要为Scrapy命令行工具提供一个基础的配置信息。（真正爬虫相关的配置信息在settings.py文件中）</p>
<p><code>items.py</code> 设置数据存储模板，用于结构化数据，如：Django的Model</p>
<p><code>pipelines.py</code> 数据处理行为，如：一般结构化的数据持久化</p>
<p><code>settings.py</code> 配置文件，如：递归的层数、并发数，延迟下载等</p>
<p><code>spiders</code> 爬虫目录，如：创建文件，编写爬虫规则</p>
<h2 id="设置数据存储模板"><a href="#设置数据存储模板" class="headerlink" title="设置数据存储模板"></a>设置数据存储模板</h2><p>要爬取的是各个图书的标题，价格信息。需要在 items.py 中设置数据存储模板。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    price = scrapy.Field()</span><br></pre></td></tr></table></figure>
<h2 id="编写爬虫"><a href="#编写爬虫" class="headerlink" title="编写爬虫"></a>编写爬虫</h2><p>爬虫规则在 books.py 中编写。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> demo.items <span class="keyword">import</span> DemoItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'books'</span></span><br><span class="line">    allowed_domains = [<span class="string">'toscrape.com'</span>]</span><br><span class="line">    <span class="comment"># 爬虫起始页</span></span><br><span class="line">    start_urls = [<span class="string">'http://books.toscrape.com/catalogue/page-1.html'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        items = response.xpath(<span class="string">"//article[@class='product_pod']"</span>)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">            title = item.xpath(<span class="string">"./h3/a/text()"</span>).get()</span><br><span class="line">            price = item.xpath(<span class="string">"./div[2]/p/text()"</span>).get()</span><br><span class="line">            item = DemoItem(title=title, price=price)</span><br><span class="line">            <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure></p>
<p>在运行爬虫之前，先在 settings.py 中设置好相关项，把 ROBOTSTXT_OBEY 置为 False ，并且打开浏览器模拟。</p>
<p>一切都设置好后，就可以运行爬虫了。为了方便运行，我习惯在项目根目录下新建一个 start.py 用来启动项目，其中代码如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> cmdline</span><br><span class="line"></span><br><span class="line">cmdline.execute(<span class="string">'scrapy crawl books'</span>.split())</span><br></pre></td></tr></table></figure>
<p>直接运行 start.py，得到如下结果。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">36</span> [scrapy.utils.log] INFO: Scrapy <span class="number">1.5</span><span class="number">.0</span> started (bot: demo)</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">36</span> [scrapy.utils.log] INFO: Versions: lxml <span class="number">4.2</span><span class="number">.1</span><span class="number">.0</span>, libxml2 <span class="number">2.9</span><span class="number">.8</span>, cssselect <span class="number">1.0</span><span class="number">.3</span>, parsel <span class="number">1.4</span><span class="number">.0</span>, w3lib <span class="number">1.19</span><span class="number">.0</span>, Twisted <span class="number">17.5</span><span class="number">.0</span>, Python <span class="number">3.6</span><span class="number">.5</span> |Anaconda, Inc.| (default, Mar <span class="number">29</span> <span class="number">2018</span>, <span class="number">13</span>:<span class="number">32</span>:<span class="number">41</span>) [MSC v<span class="number">.1900</span> <span class="number">64</span> bit (AMD64)], pyOpenSSL <span class="number">18.0</span><span class="number">.0</span> (OpenSSL <span class="number">1.0</span><span class="number">.2</span>o  <span class="number">27</span> Mar <span class="number">2018</span>), cryptography <span class="number">2.2</span><span class="number">.2</span>, Platform Windows<span class="number">-7</span><span class="number">-6.1</span><span class="number">.7601</span>-SP1</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">36</span> [scrapy.crawler] INFO: Overridden settings: &#123;<span class="string">'BOT_NAME'</span>: <span class="string">'demo'</span>, <span class="string">'NEWSPIDER_MODULE'</span>: <span class="string">'demo.spiders'</span>, <span class="string">'SPIDER_MODULES'</span>: [<span class="string">'demo.spiders'</span>]&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">36</span> [scrapy.middleware] INFO: Enabled extensions:</span><br><span class="line">[<span class="string">'scrapy.extensions.corestats.CoreStats'</span>,</span><br><span class="line"> <span class="string">'scrapy.extensions.telnet.TelnetConsole'</span>,</span><br><span class="line"> <span class="string">'scrapy.extensions.logstats.LogStats'</span>]</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.middleware] INFO: Enabled downloader middlewares:</span><br><span class="line">[<span class="string">'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.retry.RetryMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.redirect.RedirectMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.cookies.CookiesMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.downloadermiddlewares.stats.DownloaderStats'</span>]</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.middleware] INFO: Enabled spider middlewares:</span><br><span class="line">[<span class="string">'scrapy.spidermiddlewares.httperror.HttpErrorMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.spidermiddlewares.offsite.OffsiteMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.spidermiddlewares.referer.RefererMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware'</span>,</span><br><span class="line"> <span class="string">'scrapy.spidermiddlewares.depth.DepthMiddleware'</span>]</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.middleware] INFO: Enabled item pipelines:</span><br><span class="line">[]</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.engine] INFO: Spider opened</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.extensions.logstats] INFO: Crawled <span class="number">0</span> pages (at <span class="number">0</span> pages/min), scraped <span class="number">0</span> items (at <span class="number">0</span> items/min)</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [py.warnings] WARNING: C:\ProgramData\Anaconda3\lib\site-packages\scrapy\spidermiddlewares\offsite.py:<span class="number">59</span>: URLWarning: allowed_domains accepts only domains, <span class="keyword">not</span> URLs. Ignoring URL entry http://toscrape.com/ <span class="keyword">in</span> allowed_domains.</span><br><span class="line">  warnings.warn(<span class="string">"allowed_domains accepts only domains, not URLs. Ignoring URL entry %s in allowed_domains."</span> % domain, URLWarning)</span><br><span class="line"></span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.extensions.telnet] DEBUG: Telnet console listening on <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6023</span></span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.engine] DEBUG: Crawled (<span class="number">200</span>) &lt;GET http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt; (referer: <span class="keyword">None</span>)</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£51.77'</span>, <span class="string">'title'</span>: <span class="string">'A Light in the ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£53.74'</span>, <span class="string">'title'</span>: <span class="string">'Tipping the Velvet'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£50.10'</span>, <span class="string">'title'</span>: <span class="string">'Soumission'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£47.82'</span>, <span class="string">'title'</span>: <span class="string">'Sharp Objects'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£54.23'</span>, <span class="string">'title'</span>: <span class="string">'Sapiens: A Brief History ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£22.65'</span>, <span class="string">'title'</span>: <span class="string">'The Requiem Red'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£33.34'</span>, <span class="string">'title'</span>: <span class="string">'The Dirty Little Secrets ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£17.93'</span>, <span class="string">'title'</span>: <span class="string">'The Coming Woman: A ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£22.60'</span>, <span class="string">'title'</span>: <span class="string">'The Boys in the ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£52.15'</span>, <span class="string">'title'</span>: <span class="string">'The Black Maria'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£13.99'</span>, <span class="string">'title'</span>: <span class="string">'Starving Hearts (Triangular Trade ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£20.66'</span>, <span class="string">'title'</span>: <span class="string">"Shakespeare's Sonnets"</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£17.46'</span>, <span class="string">'title'</span>: <span class="string">'Set Me Free'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£52.29'</span>, <span class="string">'title'</span>: <span class="string">"Scott Pilgrim's Precious Little ..."</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£35.02'</span>, <span class="string">'title'</span>: <span class="string">'Rip it Up and ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£57.25'</span>, <span class="string">'title'</span>: <span class="string">'Our Band Could Be ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£23.88'</span>, <span class="string">'title'</span>: <span class="string">'Olio'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£37.59'</span>, <span class="string">'title'</span>: <span class="string">'Mesaerion: The Best Science ...'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£51.33'</span>, <span class="string">'title'</span>: <span class="string">'Libertarianism for Beginners'</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> http://books.toscrape.com/catalogue/page<span class="number">-1.</span>html&gt;</span><br><span class="line">&#123;<span class="string">'price'</span>: <span class="string">'£45.17'</span>, <span class="string">'title'</span>: <span class="string">"It's Only the Himalayas"</span>&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.engine] INFO: Closing spider (finished)</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.statscollectors] INFO: Dumping Scrapy stats:</span><br><span class="line">&#123;<span class="string">'downloader/request_bytes'</span>: <span class="number">315</span>,</span><br><span class="line"> <span class="string">'downloader/request_count'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'downloader/request_method_count/GET'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'downloader/response_bytes'</span>: <span class="number">5889</span>,</span><br><span class="line"> <span class="string">'downloader/response_count'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'downloader/response_status_count/200'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'finish_reason'</span>: <span class="string">'finished'</span>,</span><br><span class="line"> <span class="string">'finish_time'</span>: datetime.datetime(<span class="number">2018</span>, <span class="number">8</span>, <span class="number">20</span>, <span class="number">9</span>, <span class="number">30</span>, <span class="number">37</span>, <span class="number">857663</span>),</span><br><span class="line"> <span class="string">'item_scraped_count'</span>: <span class="number">20</span>,</span><br><span class="line"> <span class="string">'log_count/DEBUG'</span>: <span class="number">22</span>,</span><br><span class="line"> <span class="string">'log_count/INFO'</span>: <span class="number">7</span>,</span><br><span class="line"> <span class="string">'log_count/WARNING'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'response_received_count'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'scheduler/dequeued'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'scheduler/dequeued/memory'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'scheduler/enqueued'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'scheduler/enqueued/memory'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'start_time'</span>: datetime.datetime(<span class="number">2018</span>, <span class="number">8</span>, <span class="number">20</span>, <span class="number">9</span>, <span class="number">30</span>, <span class="number">37</span>, <span class="number">96620</span>)&#125;</span><br><span class="line"><span class="number">2018</span><span class="number">-08</span><span class="number">-20</span> <span class="number">17</span>:<span class="number">30</span>:<span class="number">37</span> [scrapy.core.engine] INFO: Spider closed (finished)</span><br></pre></td></tr></table></figure></p>
<p>可以看到，scrapy 在经过初始化之后开始爬虫，并且输出了所需的价格和标题信息。</p>
<h2 id="保存数据"><a href="#保存数据" class="headerlink" title="保存数据"></a>保存数据</h2><p>暂不做介绍。</p>
<hr>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>Tang</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/scrapy/">http://yoursite.com/scrapy/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！</li></ul></div><br><div class="tags"><a href="/tags/爬虫/">爬虫</a><a href="/tags/Python/">Python</a><a href="/tags/Scrapy/">Scrapy</a></div><div class="post-nav"><a class="pre" href="/jianshu/">Python爬虫--Scrapy爬取简书全站文章</a><a class="next" href="/github/">Github模拟登陆</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'3GQ0exdcRfacks3SpIDCHJxG-gzGzoHsz',
  appKey:'orhKsu5i4zUuOonEqTIBEPcF',
  placeholder:'ヾﾉ≧∀≦)o来啊，快活啊!',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Pycharm/">Pycharm</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Pycharm/日常/">日常</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/日常/">日常</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/静态网页/" style="font-size: 15px;">静态网页</a> <a href="/tags/Pycharm/" style="font-size: 15px;">Pycharm</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/网页框架/" style="font-size: 15px;">网页框架</a> <a href="/tags/动态-爬虫/" style="font-size: 15px;">动态 爬虫</a> <a href="/tags/动态网页/" style="font-size: 15px;">动态网页</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Scrapy/" style="font-size: 15px;">Scrapy</a> <a href="/tags/验证码/" style="font-size: 15px;">验证码</a> <a href="/tags/爬虫-selenium/" style="font-size: 15px;">爬虫 selenium</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/flask/">flask</a></li><li class="post-list-item"><a class="post-list-link" href="/ipproxy/">Python爬虫IP代理池</a></li><li class="post-list-item"><a class="post-list-link" href="/scrapy_login/">Scrapy模拟登录豆瓣网初级篇</a></li><li class="post-list-item"><a class="post-list-link" href="/scrapy-login-captcha/">Scrapy模拟登录豆瓣网进阶篇</a></li><li class="post-list-item"><a class="post-list-link" href="/bookSpdier2/">多进程爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/bookSpdier/">多线程爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/qiniu/">七牛云数据迁移至网易nos</a></li><li class="post-list-item"><a class="post-list-link" href="/Pycharm/">Pycharm</a></li><li class="post-list-item"><a class="post-list-link" href="/maoyan_encrypt/">Python爬虫--猫眼加密字符</a></li><li class="post-list-item"><a class="post-list-link" href="/laravel_admin/">PHP框架--Laravel</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">2048.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="0,0,0" opacity="0.5" zindex="-2" count="50" src="//lib.baomitu.com/canvas-nest.js/2.0.3/canvas-nest.umd.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>